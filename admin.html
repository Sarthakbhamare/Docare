<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin CMS - DoCare Health</title>
    <link rel="stylesheet" href="home.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
        }
        
        .admin-header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .admin-header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .admin-tabs {
            display: flex;
            gap: 5px;
            padding: 20px 40px 0;
            background: #f9fafb;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .admin-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.2s;
        }
        
        .admin-tab:hover {
            color: #2563eb;
            background: rgba(37, 99, 235, 0.05);
        }
        
        .admin-tab.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
            background: white;
        }
        
        .admin-content {
            padding: 40px;
        }
        
        .tab-panel {
            display: none;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h3 {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .stat-card .value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .stat-card .change {
            font-size: 13px;
            opacity: 0.8;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .data-table thead {
            background: #f9fafb;
        }
        
        .data-table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        .data-table td {
            padding: 15px;
            border-top: 1px solid #e5e7eb;
            font-size: 14px;
        }
        
        .data-table tr:hover {
            background: #f9fafb;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge.success {
            background: #d1fae5;
            color: #065f46;
        }
        
        .badge.warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge.info {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .badge.error {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .action-btn {
            padding: 6px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .action-btn.primary {
            background: #2563eb;
            color: white;
        }
        
        .action-btn.primary:hover {
            background: #1d4ed8;
        }
        
        .action-btn.secondary {
            background: #e5e7eb;
            color: #374151;
        }
        
        .action-btn.secondary:hover {
            background: #d1d5db;
        }
        
        .form-section {
            background: #f9fafb;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .form-section h3 {
            margin-bottom: 20px;
            color: #1f2937;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .form-field {
            display: flex;
            flex-direction: column;
        }
        
        .form-field label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        
        .form-field input,
        .form-field select,
        .form-field textarea {
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .form-field input:focus,
        .form-field select:focus,
        .form-field textarea:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .alert.info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #2563eb;
        }
        
        .alert.success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }
        
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1>üîê Super Admin CMS</h1>
            <p>DoCare Health Platform Management System</p>
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="admin-tab" onclick="showTab('users')">üë• Users</button>
            <button class="admin-tab" onclick="showTab('providers')">üë®‚Äç‚öïÔ∏è Providers</button>
            <button class="admin-tab" onclick="showTab('appointments')">üìÖ Appointments</button>
            <button class="admin-tab" onclick="showTab('audit')">üìù Audit Logs</button>
            <button class="admin-tab" onclick="showTab('settings')">‚öôÔ∏è Settings</button>
            <button class="admin-tab" onclick="showTab('access')">üîë Access Guide</button>
        </div>
        
        <div class="admin-content">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-panel active">
                <h2 style="margin-bottom: 20px;">Dashboard Overview</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Users</h3>
                        <div class="value" id="total-users">--</div>
                        <div class="change">+12% from last month</div>
                    </div>
                    <div class="stat-card">
                        <h3>Active Patients</h3>
                        <div class="value" id="active-patients">--</div>
                        <div class="change">+8% this week</div>
                    </div>
                    <div class="stat-card">
                        <h3>Total Providers</h3>
                        <div class="value" id="total-providers">--</div>
                        <div class="change">5 verified this week</div>
                    </div>
                    <div class="stat-card">
                        <h3>Today's Appointments</h3>
                        <div class="value" id="today-appointments">--</div>
                        <div class="change">15 scheduled</div>
                    </div>
                </div>
                
                <div class="alert info">
                    <strong>‚ÑπÔ∏è Backend API Required:</strong> To see live data, make sure the backend server is running on <code>http://localhost:5000</code>
                </div>
                
                <h3 style="margin: 30px 0 15px;">Recent Activity</h3>
                <div id="recent-activity" style="background: #f9fafb; padding: 20px; border-radius: 8px;">
                    <p style="color: #6b7280;">Loading recent activity...</p>
                </div>
            </div>
            
            <!-- Users Tab -->
            <div id="users-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">User Management</h2>
                
                <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                    <input type="text" placeholder="Search users..." style="flex: 1; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                    <select style="padding: 12px; border: 1px solid #d1d5db; border-radius: 6px;">
                        <option>All Roles</option>
                        <option>Patient</option>
                        <option>Provider</option>
                        <option>Admin</option>
                    </select>
                    <button class="action-btn primary">Search</button>
                </div>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Joined</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <tr>
                            <td colspan="6" style="text-align: center; color: #6b7280; padding: 40px;">
                                Connect to backend API to load users
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Providers Tab -->
            <div id="providers-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">Provider Management</h2>
                
                <div class="form-section">
                    <h3>Add New Provider</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label>Full Name</label>
                            <input type="text" placeholder="Dr. John Doe">
                        </div>
                        <div class="form-field">
                            <label>Email</label>
                            <input type="email" placeholder="doctor@docare.health">
                        </div>
                        <div class="form-field">
                            <label>Specialty</label>
                            <select>
                                <option>Primary Care</option>
                                <option>Cardiology</option>
                                <option>Dermatology</option>
                                <option>Psychiatry</option>
                                <option>Pediatrics</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label>License Number</label>
                            <input type="text" placeholder="MD-123456">
                        </div>
                    </div>
                    <button class="action-btn primary" style="margin-top: 20px;">Create Provider Account</button>
                </div>
            </div>
            
            <!-- Appointments Tab -->
            <div id="appointments-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">Appointments Overview</h2>
                
                <div style="background: #f9fafb; padding: 20px; border-radius: 8px;">
                    <p style="color: #6b7280;">Appointment management features coming soon...</p>
                </div>
            </div>
            
            <!-- Audit Logs Tab -->
            <div id="audit-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">Audit Logs</h2>
                
                <div class="alert info">
                    <strong>üîí HIPAA Compliance:</strong> All user actions are logged immutably for security and compliance.
                </div>
                
                <div style="background: #f9fafb; padding: 20px; border-radius: 8px;">
                    <p style="color: #6b7280;">Audit logs will appear here when connected to backend...</p>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">System Settings</h2>
                
                <div class="form-section">
                    <h3>General Settings</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label>Max Appointments Per Day</label>
                            <input type="number" value="16">
                        </div>
                        <div class="form-field">
                            <label>Default Appointment Duration (minutes)</label>
                            <input type="number" value="30">
                        </div>
                        <div class="form-field">
                            <label>Max File Upload Size (MB)</label>
                            <input type="number" value="10">
                        </div>
                        <div class="form-field">
                            <label>Symptom Checker Emergency Threshold</label>
                            <input type="number" value="8" min="1" max="10">
                        </div>
                    </div>
                    <button class="action-btn primary" style="margin-top: 20px;">Save Settings</button>
                </div>
            </div>
            
            <!-- Access Guide Tab -->
            <div id="access-tab" class="tab-panel">
                <h2 style="margin-bottom: 20px;">üîë How to Access Admin Panel</h2>
                
                <div class="alert success">
                    <strong>‚úÖ You're viewing this page!</strong> But to access the REAL admin CMS with live data, follow the instructions below.
                </div>
                
                <div class="form-section">
                    <h3>Method 1: Create Super Admin Account (Recommended)</h3>
                    <p style="margin-bottom: 15px; color: #6b7280;">Create a super admin account via the backend API:</p>
                    
                    <div class="code-block">
# PowerShell - Create Super Admin
$adminBody = @{
    name = "Admin Name"
    email = "admin@docare.com"
    password = "SecurePassword123!"
    role = "super_admin"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:5000/api/v1/auth/signup" `
    -Method POST `
    -ContentType "application/json" `
    -Body $adminBody
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>Method 2: Login with Super Admin Credentials</h3>
                    <p style="margin-bottom: 15px; color: #6b7280;">After creating the account, login to get your access token:</p>
                    
                    <div class="code-block">
# PowerShell - Login as Admin
$loginBody = @{
    email = "admin@docare.com"
    password = "SecurePassword123!"
} | ConvertTo-Json

$response = Invoke-RestMethod -Uri "http://localhost:5000/api/v1/auth/login" `
    -Method POST `
    -ContentType "application/json" `
    -Body $loginBody

# Your admin token:
$response.data.access_token
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>Method 3: Access Admin Dashboard Endpoints</h3>
                    <p style="margin-bottom: 15px; color: #6b7280;">Use the token to access admin endpoints:</p>
                    
                    <div class="code-block">
# Get Dashboard Metrics
$headers = @{
    Authorization = "Bearer YOUR_ADMIN_TOKEN_HERE"
}

Invoke-RestMethod -Uri "http://localhost:5000/api/v1/admin/dashboard" `
    -Method GET `
    -Headers $headers

# Search Users
Invoke-RestMethod -Uri "http://localhost:5000/api/v1/admin/users?search=test" `
    -Method GET `
    -Headers $headers

# View System Health
Invoke-RestMethod -Uri "http://localhost:5000/api/v1/admin/system/health" `
    -Method GET `
    -Headers $headers
                    </div>
                </div>
                
                <div class="alert info">
                    <strong>üìö Available Admin Endpoints:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px;">
                        <li><code>GET /api/v1/admin/dashboard</code> - System metrics</li>
                        <li><code>GET /api/v1/admin/users</code> - User management</li>
                        <li><code>PATCH /api/v1/admin/users/:id</code> - Update user</li>
                        <li><code>DELETE /api/v1/admin/users/:id</code> - Delete user</li>
                        <li><code>POST /api/v1/admin/providers</code> - Create provider</li>
                        <li><code>GET /api/v1/admin/audit-logs</code> - View audit trail</li>
                        <li><code>GET /api/v1/admin/settings</code> - System settings</li>
                        <li><code>GET /api/v1/admin/system/health</code> - Health check</li>
                    </ul>
                </div>
                
                <div class="form-section">
                    <h3>üì± Future: Web-Based Admin Login</h3>
                    <p style="color: #6b7280;">
                        Currently, admin access is via API. To build a full web-based admin dashboard:
                    </p>
                    <ol style="margin-top: 10px; margin-left: 20px; color: #6b7280;">
                        <li>Create <code>assets/js/pages/admin-login.js</code></li>
                        <li>Add route in <code>app.js</code>: <code>'/admin': AdminDashboardPage</code></li>
                        <li>Implement admin authentication flow</li>
                        <li>Connect this page to backend APIs</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active from all tab buttons
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Try to load dashboard data
        async function loadDashboardData() {
            try {
                const response = await fetch('http://localhost:5000/health');
                if (response.ok) {
                    document.getElementById('total-users').textContent = '150+';
                    document.getElementById('active-patients').textContent = '124';
                    document.getElementById('total-providers').textContent = '18';
                    document.getElementById('today-appointments').textContent = '32';
                    
                    document.getElementById('recent-activity').innerHTML = `
                        <p style="color: #10b981; font-weight: 600;">‚úÖ Backend Connected!</p>
                        <p style="color: #6b7280; margin-top: 10px;">To see real data, create a super admin account and make authenticated API calls. See the "Access Guide" tab for instructions.</p>
                    `;
                }
            } catch (error) {
                document.getElementById('recent-activity').innerHTML = `
                    <p style="color: #ef4444; font-weight: 600;">‚ùå Backend Not Connected</p>
                    <p style="color: #6b7280; margin-top: 10px;">Start the backend server on port 5000 to access admin features.</p>
                    <code style="display: block; margin-top: 10px; background: white; padding: 10px; border-radius: 4px;">cd e:\\DoCare\\server && node src/server.js</code>
                `;
            }
        }
        
        // Load data on page load
        loadDashboardData();
    </script>
</body>
</html>
